"use strict";function _classCallCheck(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function _warn(a){return _.warn("Page",a)}var _createClass=function(){function a(a,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}(),_={exp:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return new RegExp(a,"g")},escapeHTML:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return a.replace(/&(?!#?[0-9A-Za-z]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},warn:function(){var a=arguments.length<=0||void 0===arguments[0]?"Global":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"something happened:)":arguments[1],e=a+" Warn: ";return console&&console.warn(e+t),e+t},isType:function(a,t){return"dom"===a?t instanceof HTMLElement:a===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}},Page=function(){function a(t){return _classCallCheck(this,a),t.el&&_.isType("dom",t.el)?t.total&&_.isType("number",t.total)?t.do&&_.isType("function",t.do)?(this.el=t.el,this.total=t.total,this.max=8,this.do=t.do,this.page=1,this.tpl={prev:'<a class="m-page-btns" href="javascript: void(0)" data-page="prev">&lt;</a>',next:'<a class="m-page-btns" href="javascript: void(0)" data-page="next">&gt;</a>',omit:'<span class="m-page-omit" data-page="omit">...</span>'},this.init(),void this.bind()):_warn("arguments.do should be a Function"):_warn("arguments.total should be a Number"):_warn("arguments.el should be a DOM Element")}return _createClass(a,[{key:"getCurrTpl",value:function(){return'<span class="m-page-curr" data-page="curr">'+this.page+"</span>"}},{key:"init",value:function(){var a=this.tpl.prev+this.getCurrTpl();if(this.total>this.max){for(var t=this.max-(this.total-this.max)-2,e=0;e<t;e++)a+='<a class="m-page-links" href="javascript: void(0)" data-page="'+(e+2)+'">'+(e+2)+"</a>";a+=this.tpl.omit+'<a class="m-page-links" href="javascript: void(0)" data-page="'+this.total+'">'+this.total+"</a>"+this.tpl.next}else{for(var n=0,i=this.total;n<i-1;n++)a+='<a class="m-page-links" href="javascript: void(0)" data-page="'+(n+2)+'">'+(n+2)+"</a>";a+=this.tpl.next}this.el.innerHTML=a}},{key:"bind",value:function(){var a=this;this.el.addEventListener("click",function(t){var e=t||window.event,n=e.target.getAttribute("data-page");switch(n){case"omit":case"curr":break;case"prev":1!==a.page&&a.pageHandel(a.page-1);break;case"next":a.page!==a.total&&a.pageHandel(a.page+1);break;default:n&&a.pageHandel(parseInt(n))}})}},{key:"pageHandel",value:function(a){this.page=a;var t=this.max,e=this.total,n=0,i=0,s=0,r=[],l=[],o=t-1,p=a-1,c=e-a;for(r.push(this.getCurrTpl()),l.push("curr");n<o;){if(n<o&&++i<=p){var u=a-i;n++,r.unshift('<a class="m-page-links" href="javascript: void(0)" data-page="'+u+'">'+u+"</a>"),l.unshift(u)}if(n<o&&++s<=c){var h=a+s;n++,r.push('<a class="m-page-links" href="javascript: void(0)" data-page="'+h+'">'+h+"</a>"),l.push(h)}}2!==l[1]&&"curr"!==l[1]&&(r[0]='<a class="m-page-links" href="javascript: void(0)" data-page="1">1</a>',r[1]=this.tpl.omit),l[t-1]!==e&&"curr"!==l[t-1]&&(r[t-2]=this.tpl.omit,r[t-1]='<a class="m-page-links" href="javascript: void(0)" data-page="'+e+'">'+e+"</a>"),this.el.innerHTML=this.tpl.prev+r.join("")+this.tpl.next}}]),a}();new Page({el:document.querySelector(".m-page"),total:10,max:8,do:function(a){console.log(a)}});