"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _query(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return _.exp(config.open+["#([\\s\\S])+?","([^{#}])*?"][e]+config.close)}function rtpl(e){return"string"!=typeof e?_.warn("Render","template should be String"):new Tpl(e)}function _parse(e){if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var n="";for(var t in e)n+=t+"="+e[t]+"&";return n}_.warn("HTTP","data must be an Object")}function http(e){return new Promise(function(n,t){var r=new XMLHttpRequest,o=e.data?_parse(e.data):"";e.type=e.type||"GET","GETget".indexOf(e.type)!==-1?(r.open(e.type,e.url+=o?"?"+o:"",!0),r.send(null)):"POSTpost".indexOf(e.type)!==-1&&(r.open(e.type,e.url,!0),r.send(o)),r.onreadystatechange=function(){4==r.readyState&&(r.status>=200&&r.status<=207||304===r.status?("JSONjson".indexOf(e.dataType)!==-1&&n(JSON.parse(r.responseText)),n(r.responseText)):t(r.status))}})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_={exp:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return new RegExp(e,"g")},escapeHTML:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return e.replace(/&(?!#?[0-9A-Za-z]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},warn:function(){var e=arguments.length<=0||void 0===arguments[0]?"Global":arguments[0],n=arguments.length<=1||void 0===arguments[1]?"something happened:)":arguments[1],t=e+" Warn: ";return console&&console.warn(t+n),t+n}},config={open:"{{",close:"}}"},Tpl=function(){function e(n){_classCallCheck(this,e),this.tpl=n,this.cache=null}return _createClass(e,[{key:"parse",value:function(e,n){var t=_.exp,r=t("^"+config.open+"#",""),o=t(config.close+"$");e=e.replace(/[\r\t\n]/g," ").replace(t(config.open)+"#",config.open+"# ").replace(t(config.close+"}"),"} "+config.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(_query(),function(e){return e=e.replace(r,"").replace(o,""),'";'+e.replace(/\\/g,"")+'; view +="'}).replace(_query(1),function(e){var n='"+(';return e.replace(/\s/g,"")===config.open+config.close?"":(e=e.replace(t(config.open+"|"+config.close),""),/^=/.test(e)&&(e=e.replace(/^=/,""),n='"+html('),n+e.replace(/\\/g,"")+')+"')}),e='"use strict";var view = "'+e+'";return view;';try{return this.cache=e=new Function("data, html",e),e(n,_.escapeHTML)}catch(e){return this.cache=null,_.warn("Render",e)}}},{key:"render",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1],t=void 0;return e?"function"!=typeof n?_.warn("Render","arguments cb should be Function"):(t=this.cache?this.cache(e,_.escapeHTML):this.parse(this.tpl,e),n(t),t):_.warn("Render","undefined data")}}]),e}();http({url:"http://study.163.com/webDev/couresByCategory.htm",data:{pageNo:1,psize:6,type:20},type:"GET",dataType:"json"}).then(function(e){console.log(e),document.querySelector(".g-bd").innerHTML=rtpl(["{{# data.list.forEach(function (item){ }}","<div>","<span>{{item.name}}</span>",'<img src="{{item.bigPhotoUrl}}">',"<p>{{item.description}}</p>","</div>","{{# }) }}"].join("")).render(e)}).catch(function(e){console.log(e)});